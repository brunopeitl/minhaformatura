<!DOCTYPE html>
<head>
<meta charset="utf-8" />
<meta name="format-detection" content="telephone=no" />
<meta name="msapplication-tap-highlight" content="no" />
<meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" />
<meta http-equiv="Content-Security-Policy" content="default-src * 'unsafe-inline' gap:; style-src 'self' 'unsafe-inline'; media-src *" />
<title>Minha Formatura</title>
	
<style>
html,
body {
	position: relative;
  	height: 100%;
	width: 100%;
	margin:0; padding:0; overflow: hidden; /* ESCONDE BARRA DE ROLAGEM */
	 backface-visibility:hidden;
	-webkit-backface-visibility:hidden;
	 overflow: hidden;
	-ms-content-zooming: none;
	-ms-touch-action:none;
}
#foto { position:relative; }
ul { list-style-type:none; margin:0; padding:0; }
li { height:300px; background-color:#CCC; float:left; padding:0; margin:0; }
</style>
</head>
<body onmousemove="pegar_coordenada()">

<div id="foto" onmousedown="comeca_puxar()" onmouseup="parar_puxar()">
	<ul id="listaUL">
	</ul>
</div>
<p style="clear:left"></p>
<p>Posição Inicial: <p id="coordenada_x_inicial">0</p></p>
<p>Posição Final: <p id="coordenada_x_final">0</p></p>
<p>Posição ATUAL: <p id="coordenada_x">0</p></p>

<script>
//Variáveis e comandos para montar galeria
var qtd_fotos = 6; //Quantidade de fotos
var larguraJanela = window.innerWidth; //Pega largura da janela
var larguraFoto = (larguraJanela * 90) / 100; //Área onde aparece a foto é 90% da largura da janela
var espacamentoFotos = (larguraJanela * 10) / 100; //Distancia entre uma foto e outra é 10% da largura da janela
var areaFoto = larguraFoto + espacamentoFotos; //Soma a largura da foto + espaçamento entre elas - Usado para calcular a distancia que as fotos vão andar na animação
var larguraTotal = qtd_fotos * areaFoto; //Largura total de todas as fotos + espaçamentos
document.getElementById("listaUL").style.width = larguraTotal + "px"; //Coloca essa largura total na UL que contém as fotos 
var puxarUL = espacamentoFotos / 2;
document.getElementById("listaUL").style.marginLeft = -puxarUL + "px"; //Puxa a UL em 5% para a esquerda para centralizar as fotos
var alturaFoto = (larguraFoto * 160) / 100; //Define altura da área onde aparecem as fotos

//Laço for para criar os elementos LI onde ficarão as fotos, já com a largura e o espaçamento que foi calculado
var lista = "";
for (i = 1; i <= qtd_fotos; i++) {
	lista += "<li style='width:"+larguraFoto+"px; height:"+alturaFoto+"px; margin-left:"+espacamentoFotos+"px;'>Foto "+ i +"</li>"; 
}
document.getElementById("listaUL").innerHTML = lista;

//Variáveis e comandos para fazer a galeria funcionar
var mover_s_n = [0];
var posicao_atual;
posicao_inicial = [0];
var posicao_final = [0];
var lado_mover = [0];
var numero = [1];
var posicao_que_ficou = [0];

var inicia_animacao;
var finaliza_animacao;

//Funções que animam as fotos se movendo
function moveFotoEsq(inicia_animacao , finaliza_animacao) {
	setTimeout(function(){
        if(inicia_animacao > finaliza_animacao) {
			document.getElementById("foto").style.left = inicia_animacao + "px";
			inicia_animacao = inicia_animacao - 5;
			moveFotoEsq(inicia_animacao , finaliza_animacao);
		}
    }, 5);
}

function moveFotoDir(inicia_animacao , finaliza_animacao) {
	setTimeout(function(){
        if(inicia_animacao < finaliza_animacao) {
			document.getElementById("foto").style.left = inicia_animacao + "px";
			inicia_animacao = inicia_animacao + 5;
			moveFotoDir(inicia_animacao , finaliza_animacao);
		}
    }, 5);
}

//Pega as coordenadas do cursor na tela para definir para que lado as fotos vão se movimentar
function pegar_coordenada() {
	var posicao_atual = event.clientX;
	document.getElementById("coordenada_x").innerHTML = posicao_atual;
    if (mover_s_n[0] == 1) {
    	var qtd_mover = posicao_atual - posicao_inicial[0];
		
		if(numero[0] == 1) {
			if (event.clientX <= posicao_inicial[0]) {
				document.getElementById("foto").style.left = qtd_mover + "px";
			}
        }
		else {
			if(numero[0] < qtd_fotos) {
				document.getElementById("foto").style.left = (qtd_mover - (areaFoto * (numero[0] - 1))) + "px";
			}
			else {
				if (event.clientX > posicao_inicial[0]) {
					document.getElementById("foto").style.left = (qtd_mover - (areaFoto * (numero[0] - 1))) + "px";
				}
				else {
					document.getElementById("foto").style.left = posicao_que_ficou[0] + "px";
				}
			}
		}
		
    	document.getElementById("coordenada_x").style.color = "red";
    }
    else {
    	document.getElementById("coordenada_x").style.color = "black";
    }
}

//Função que executa quando clica na tela e começa a puxar as fotos
function comeca_puxar() {
	posicao_inicial[0] = event.clientX;
    mover_s_n[0] = 1;
	document.getElementById("coordenada_x_inicial").innerHTML = posicao_inicial[0];
}

//Função que define as  coordenadas para movimentar as fotos
function passarProxima() {
	if (lado_mover[0] == 0) { //MOVE PARA O LADO ESQUERDO
		if(numero[0] < qtd_fotos) {
			//--------------------------------- Aqui vai uma animação
			inicia_animacao = posicao_que_ficou[0] - (posicao_inicial[0] - event.clientX);
			finaliza_animacao = -(areaFoto * numero[0]);
			moveFotoEsq(inicia_animacao , finaliza_animacao);
			//--------------------------------- Aqui vai uma animação
			
			posicao_que_ficou[0] = -(areaFoto * numero[0]);
			posicao_final[0] = 0;
			posicao_inicial[0] = 0;
			numero[0] = numero[0] + 1;
		}
	}
	else { //MOVE PARA O LADO DIREITO
		if (numero[0] == 1) {
		}
		else {
			if (numero[0] == 2) {
				//--------------------------------- Aqui vai uma animação
				inicia_animacao = posicao_que_ficou[0] + (event.clientX - posicao_inicial[0]);
				finaliza_animacao = (posicao_que_ficou[0] + (areaFoto * (numero[0] - 1)));
				moveFotoDir(inicia_animacao , finaliza_animacao);
				//--------------------------------- Aqui vai uma animação
				
				posicao_que_ficou[0] = (posicao_que_ficou[0] + (areaFoto * (numero[0] - 1)));
			}
			else {
				//--------------------------------- Aqui vai uma animação
				inicia_animacao = posicao_que_ficou[0] + (event.clientX - posicao_inicial[0]);
				finaliza_animacao = (posicao_que_ficou[0] + (areaFoto * (numero[0] - (numero[0] - 1))));
				moveFotoDir(inicia_animacao , finaliza_animacao);
				//--------------------------------- Aqui vai uma animação
				
				posicao_que_ficou[0] = (posicao_que_ficou[0] + (areaFoto * (numero[0] - (numero[0] - 1))));
			}
			
			posicao_final[0] = 0;
			posicao_inicial[0] = 0;
			numero[0] = numero[0] - 1;
		}
	}
	document.getElementById("coordenada_x_inicial").innerHTML = posicao_inicial[0];
	document.getElementById("coordenada_x_final").innerHTML = posicao_final[0];
}

//Função que executa quando solta
function parar_puxar() {
	posicao_final[0] = event.clientX;
	if(posicao_final[0] < posicao_inicial[0]) {
		lado_mover[0] = 0;
	}
	else {
		lado_mover[0] = 1;
	}
	passarProxima();
    mover_s_n[0] = 0;
    document.getElementById("coordenada_x_final").innerHTML = posicao_final[0];
}
</script>

</body>
</body>
</html>
